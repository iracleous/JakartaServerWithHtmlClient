<!DOCTYPE html>
<html lang="en">
<head>
 <style>
  body {
   text-align: left;
   font-size: 20px;
   background-color: lightgreen;
  }
  button {
   background-color: #4CAF50;
   border: none;
   color: white;
   padding: 5px 32px;
   text-align: left;
   text-decoration: none;
   display: inline-block;
   font-size: 16px;
  }
 </style>
 <title>Crud demo for product resource</title>
</head>
<body>

<a href="http://localhost:8080/work1-1.0-SNAPSHOT/api/products/ping">Ping</a><hr>

<a href="http://localhost:8080/work1-1.0-SNAPSHOT/api/products">GETall</a><hr>

<button onclick="getById()">GetById</button>
<label for="num">num</label> <input type="text" id="num" name="num" placeholder="id"><hr>

<button onclick="createProduct()">Post</button>
<label for="num1">num</label> <input type="text" id="num1" name="num1" placeholder="id">
<label for="name">name</label> <input type="text" id="name" name="name" placeholder="name">
<label for="price">price</label> <input type="text" id="price" name="price" placeholder="price"><hr>

<button onclick="updateProduct()">Put</button>
<label for="num2">num</label> <input type="text" id="num2" name="num2" placeholder="id">
<label for="name2">num</label> <input type="text" id="name2" name="name2" placeholder="name">
<label for="price2">num</label> <input type="text" id="price2" name="price2" placeholder="price"><hr>

<button onclick="deleteProduct()">Delete</button>
<label for="num3">num</label> <input type="text" id="num3" name="num3" placeholder="id">
<hr>

<script>
 const urlBase = "http://localhost:8080/work1-1.0-SNAPSHOT/api/products/";

  function getById(){
        let url =  urlBase + document.getElementById("num").value;
     //   window.open(url, '_self');
        fetch(url, { method: 'GET',
         headers: {
          'Accept': 'application/json',
          'Content-type': 'application/json',
         }
        })
        .then(function (response) {
         return response.text();
        })
        .then(function (body) {
         alert(body);
        })
        .catch(reason => alert(reason));
    }

    function createProduct(){
        let url = urlBase;
        let data = {
            "id": document.getElementById("num1").value,
            "name": document.getElementById("name").value,
            "price": document.getElementById("price").value
        };
        let jsonData= JSON.stringify(data);

        fetch(url, { method: 'POST', body: jsonData,
            headers: {
                'Accept': 'application/json',
                'Content-type': 'application/json',
            }
        })
        .then(function (response) {
            return response.text();
        })
        .then(function (body) {
            alert(body);
        })
        .catch(reason => alert(reason));
    }

    function updateProduct(){
         let url = urlBase + document.getElementById("num2").value;
         let data = {
             "name": document.getElementById("name2").value,
             "price": document.getElementById("price2").value
         };
         let jsonData= JSON.stringify(data);

         fetch(url, { method: 'PUT', body: jsonData,
             headers: {
                 'Accept': 'application/json',
                 'Content-type': 'application/json',
             }
         })
         .then(function (response) {
             return response.text();
         })
         .then(function (body) {
             alert(body);
         }) .catch(reason => alert(reason));
    }

    function deleteProduct(){
         let url = urlBase + document.getElementById("num3").value;
         fetch(url, { method: 'DELETE',
         headers: {
             'Accept': 'application/json',
             'Content-type': 'application/json',
         }
        })
         .then(function (response) {
             return response.text();
         })
         .then(function (body) {
             alert(body);
         })
         .catch(reason => alert(reason));
    }
</script>
</body>
</html>